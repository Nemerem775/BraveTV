<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Drop Anonymous Message</title>

<style>
/* Same beautiful UI styling */
:root{
  --bg:#0b1220; --accent:#7c5cff; --accent2:#4ab6ff; --text:#e6eef8; --glass:rgba(255,255,255,0.04);
}
*{margin:0;padding:0;box-sizing:border-box;font-family:Inter,sans-serif;}
body{
  background:var(--bg);
  color:var(--text);
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
}
canvas{
  position:absolute;
  top:0;left:0;width:100%;height:100%;
  z-index:0;
}
.card{
  position:relative;
  z-index:5;
  width:90%;max-width:450px;
  padding:25px;
  border-radius:16px;
  background:var(--glass);
  backdrop-filter:blur(14px);
  box-shadow:0 15px 40px rgba(0,0,0,0.45);
  text-align:center;
}
.logo{
  width:80px;height:80px;
  object-fit:contain;
  margin-bottom:10px;
  border-radius:16px;
  border:2px solid rgba(255,255,255,0.2);
  animation:pulse 2s infinite ease-in-out;
}
@keyframes pulse{
  0%,100%{transform:scale(1);}
  50%{transform:scale(1.1);}
}
.btn{
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  border:none;
  padding:14px 20px;
  font-weight:700;
  border-radius:12px;
  margin-top:10px;
  cursor:pointer;
  color:#021028;
  width:100%;
  font-size:15px;
}
.modal{
  position:fixed;top:0;left:0;right:0;bottom:0;
  background:rgba(0,0,0,0.65);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:20;
}
.modal-content{
  width:90%;max-width:500px;
  background:var(--glass);
  padding:25px;
  backdrop-filter:blur(12px);
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,0.5);
  animation:slide 0.3s ease;
}
@keyframes slide{
  from{transform:translateY(40px);opacity:0;}
  to{transform:translateY(0);opacity:1;}
}
textarea{
  width:100%;
  height:130px;
  border:none;
  border-radius:12px;
  background:rgba(255,255,255,0.1);
  padding:12px;
  color:var(--text);
  resize:none;
}
.close-btn{
  margin-top:10px;
  background:#e63946;
  color:white;
  padding:10px 16px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  display:block;
  width:100%;
  font-weight:600;
}
.admin-link{
  position:absolute;bottom:10px;right:15px;
  color:rgba(255,255,255,0.25);
  text-decoration:none;
  font-size:12px;
}
</style>
</head>

<body>

<canvas id="bgCanvas"></canvas>

<div class="card">
  <img src="favicon.png" class="logo">
  <h2>Drop Anonymous Message</h2>
  <p>Your identity is 100% safe. Tell me anything.</p>
  <button class="btn" onclick="openModal()">Send Message</button>
</div>

<!-- Modal -->
<div class="modal" id="formModal">
  <div class="modal-content">
    <h2>Send Message</h2>
    <textarea id="message" placeholder="Type your message..." required></textarea>
    <button class="btn" onclick="sendMessage()">Send</button>
    <button class="close-btn" onclick="closeModal()">Close</button>
  </div>
</div>

<a href="admin.html" class="admin-link">Admin</a>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js"></script>

<script>
// Your Firebase config (paste your own here!)
const firebaseConfig = {
  apiKey: "AIzaSyBDghLMCVjX9bMTNE2XtGcNRfPfrhGmY7I",
  authDomain: "messages-c430e.firebaseapp.com",
  projectId: "messages-c430e",
  storageBucket: "messages-c430e.firebasestorage.app",
  messagingSenderId: "307785062866",
  appId: "1:307785062866:web:4cee0f0d50a9922705d00b"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// Modal controls
function openModal(){ document.getElementById("formModal").style.display="flex"; }
function closeModal(){ document.getElementById("formModal").style.display="none"; }

// Send message
async function sendMessage(){
  const msg = document.getElementById("message").value.trim();
  if(!msg){ alert("Message cannot be empty."); return; }

  await db.collection("messages").add({
    text: msg,
    time: Date.now()
  });

  alert("Message sent successfully!");
  document.getElementById("message").value = "";
  closeModal();
}

// Particle background
const canvas=document.getElementById("bgCanvas");
const ctx=canvas.getContext("2d");
let particles=[];
function resize(){canvas.width=innerWidth;canvas.height=innerHeight;}
resize();window.onresize=resize;
for(let i=0;i<80;i++){
  particles.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*3+1,
    dx:(Math.random()-0.5)*1,dy:(Math.random()-0.5)*1,
    color:`hsl(${Math.random()*360},80%,60%)`});
}
function anim(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    p.x+=p.dx;
    p.y+=p.dy;
    if(p.x<0||p.x>canvas.width) p.dx*=-1;
    if(p.y<0||p.y>canvas.height) p.dy*=-1;
    ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fillStyle=p.color;ctx.fill();
  });
  requestAnimationFrame(anim);
}
anim();
</script>

</body>
</html>
